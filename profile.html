<!DOCTYPE html>
<html lang="en"><!-- Basic -->
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">   
   
    <!-- Mobile Metas -->
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
 
     <!-- Site Metas -->
    <title>Heart Gym</title>  
    <meta name="keywords" content="">
    <meta name="description" content=""> 
    <meta name="author" content="">

    <!-- Site Icons -->
    <link rel="shortcut icon" href="images/logoE.png" type="image/x-icon">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- Pogo Slider CSS -->
    <link rel="stylesheet" href="css/pogo-slider.min.css">
	<!-- Site CSS -->
    <link rel="stylesheet" href="css/style.css">    
    <!-- Responsive CSS -->
    <link rel="stylesheet" href="css/responsive.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/custom.css">

	<link rel="stylesheet" href="css/giftsU.css">

</head>
<body id="home" data-spy="scroll" data-target="#navbar-wd" data-offset="98">

	<!-- LOADER -->
    <div id="preloader">
		<div class="preloader pulse">
			<h3>Heart Gym</h3>
		</div>
    </div><!-- end loader -->
    <!-- END LOADER -->
	
	<!-- Start header -->
	<header class="top-header">
		<nav class="navbar header-nav navbar-expand-lg">
            <div class="container">
				<a class="navbar-brand" href="home.html"><img src="images/gym.jpg" width=150 alt="image"></a>
				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-wd" aria-controls="navbar-wd" aria-expanded="false" aria-label="Toggle navigation">
					<span></span>
					<span></span>
					<span></span>
				</button>
                <div class="collapse navbar-collapse justify-content-end" id="navbar-wd">
                    <ul class="navbar-nav">
                        <li><a class="nav-link" href="postProfile.html">Agregar Usuario</a></li>
                        <li><a class="nav-link" href="Horarios.html">Horarios</a></li>
                    </ul>
                </div>
            </div>
        </nav>
	</header>
	<!-- End header -->
	
	<!-- Start About us -->
	<div id="about" class="about-box">
		<div class="about-a1">
			<div class="container">
				<div class="row">
					<div class="col-lg-12 text-center">
						<div class="title-box">
							<h2>Usuarios</h2>
						</div>
					</div>
					<div class="search-box">
						<input id="search" type="text" class="search-txt" placeholder="Search">
						<li><a class="search-btn"><i onclick="callAPI()" class="fa fa-search"></i></a></li>
					  </div>
				</div>
				<div id="profile" class="row">
					
				</div>
			</div>
		</div>
	</div>
	<!-- End About us -->
	
	<!-- Start Footer -->
	<footer class="footer-box">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<p class="footer-company-name">All Rights Reserved. &copy; 2021 <a>Proyecto - DASW</a> Edited By : Denisse Galindo & Miguel A. Valle.</p>
				</div>
			</div>
		</div>
	</footer>
	<!-- End Footer -->

	<!-- ALL JS FILES -->
	<script>
		var callAPI = () => {
            // instantiate a headers object
            var myHeaders = new Headers();
            // add content type header to object
            myHeaders.append("Content-Type", "application/json");
            // using built in JSON utility package turn object to string and store in a variable
            //var raw = JSON.stringify({"UserID":id});
            // create a JSON object with parameters for API call and store in a variable
            var requestOptions = {
                method: 'GET', 
                headers: myHeaders
                //body: raw,
                //redirect: 'follow'
            };
            // make API call with parameters and use promises to get response
            fetch("https://zqsv4te66e.execute-api.us-east-1.amazonaws.com/Dev/users", requestOptions)
			.then(response => response.text())
            //.then(result => console.log(result))
            .then(result => {
                console.log(result)
                let users = JSON.parse(result);
                console.log(users);
                count = users.Items.length
                console.log(count)
                usersToHTML(users);
            })
            .catch(error => console.log('error', error));
        }

        let usersToHTML = (users) => {
            let listU = document.getElementById("profile");
            users.Items.forEach((e, i) => {
                let userD = `
            <div class="about-a1">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-12 col-md-12 col-sm-12">
                                <div class="row align-items-center about-main-info">
                                    <div class="col-lg-8 col-md-6 col-sm-12">
                                        <h2><span>* ${users.Items[i].FirstName} ${users.Items[i].LastName} *</span></h2>
                                        <p>Telefono: ${users.Items[i].Phone}</p>
                                        <p>Suscripcion: ${users.Items[i].Subscription}</p>
                                        <p>Cita: ${users.Items[i].Schedule}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> 
            `;
            listU.insertAdjacentHTML("beforeend", userD);
            });
        }
	</script>
	<script src="js/guestListU.js"></script>
	<script src="js/jquery.min.js"></script>
	<script src="js/popper.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
    <!-- ALL PLUGINS -->
	<script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/jquery.pogo-slider.min.js"></script> 
	<script src="js/slider-index.js"></script>
	<script src="js/smoothscroll.js"></script>
	<script src="js/responsiveslides.min.js"></script>
    <script src="js/timeLine.min.js"></script>	
	<script src="js/form-validator.min.js"></script>
    <script src="js/contact-form-script.js"></script>
    <script src="js/custom.js"></script>
</body>
</html>